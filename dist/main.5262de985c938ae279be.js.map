{"version":3,"file":"main.5262de985c938ae279be.js","sources":["webpack:///src/entry-client.js","webpack:///src/app.js","webpack:///./src/App.vue","webpack:///./src/App.vue?a35b","webpack:///./src/App.vue?bf63","webpack:///src/route/index.js","webpack:///src/store/index.js","webpack:///src/api/index.js"],"sourcesContent":["import { createApp } from './app'\nconst { app, router, store } = createApp()\n\nif (window.__INITIAL_STATE__) {\n  store.replaceState(window.__INITIAL_STATE__)\n}\n\nrouter.onReady(() => {\n  console.log(router)\n  router.beforeResolve((to, from, next) => {\n    console.log(to, from)\n    const matched = router.getMatchedComponents(to)\n    const prevMatched = router.getMatchedComponents(from)\n    // 我们只关心之前没有渲染的组件\n    // 所以我们对比它们，找出两个匹配列表的差异组件\n    let diffed = false\n    const activated = matched.filter((c, i) => {\n      return diffed || (diffed = (prevMatched[i] !== c))\n    })\n    if (!activated.length) {\n      return next()\n    }\n\n    // 这里如果有加载指示器(loading indicator)，就触发\n    Promise.all(activated.map(c => {\n      if (c.asyncData) {\n        return c.asyncData({ store, route: to })\n      }\n    })).then(() => {\n      // 停止加载指示器(loading indicator)\n      next()\n    }).catch(next)\n  })\n\n  app.$mount('#app')\n})\n\n\n// WEBPACK FOOTER //\n// src/entry-client.js","import Vue from 'vue'\nimport App from './App.vue'\nimport { createRouter } from './route'\nimport { createStore } from './store'\nimport { sync } from 'vuex-router-sync'\n\n// Vue.config.devtools = process.env.NODE_ENV !== 'production'\n// Vue.config.debug = true\n// Vue.config.devtools = true\n// Vue.config.productionTip = true\n\nexport function createApp(context = {}) {\n  const router = createRouter()\n  const store = createStore()\n  sync(store, router)\n\n  const app = new Vue({\n    data: {\n      url: context.url\n    },\n    router,\n    store,\n    // components: {\n    //   App\n    // },\n    // template: '<App />'\n    render: h => h(App)\n  })\n\n  return { app, router, store }\n}\n\n\n// WEBPACK FOOTER //\n// src/app.js","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=7ba5bd90\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/yangming/Documents/learn/vue-ssr/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('7ba5bd90', component.options)\n    } else {\n      api.reload('7ba5bd90', component.options)\n    }\n  }\n}\ncomponent.options.__file = \"src/App.vue\"\nexport default component.exports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = 16\n// module chunks = 2","export * from \"-!../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=template&id=7ba5bd90\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue?vue&type=template&id=7ba5bd90\n// module id = 17\n// module chunks = 2","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { attrs: { id: \"app\" } },\n    [_c(\"p\", [_vm._v(\"App 页面\")]), _c(\"router-view\")],\n    1\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Users/yangming/Documents/learn/vue-ssr/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (module.hot.data) {\n      require(\"/Users/yangming/Documents/learn/vue-ssr/node_modules/vue-hot-reload-api/dist/index.js\").rerender('7ba5bd90', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    }\n  }\n}export { render, staticRenderFns }\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/loaders/templateLoader.js?{\"compilerOptions\":{\"preserveWhitespace\":false},\"ident\":\"vue-loader-options\"}!./node_modules/vue-loader/lib?{\"compilerOptions\":{\"preserveWhitespace\":false},\"ident\":\"vue-loader-options\"}!./src/App.vue?vue&type=template&id=7ba5bd90\n// module id = 18\n// module chunks = 2","import Vue from 'vue'\nimport Router from 'vue-router'\n// import Index from '../views/Index'\n\nVue.use(Router)\n\nexport function createRouter() {\n  return new Router({\n    mode: 'history',\n    routes: [\n      {\n        path: '/:id',\n        component: r => require.ensure([], () => r(require('../views/Index.vue')), 'Index')\n      }\n    ]\n  })\n}\n\n\n// WEBPACK FOOTER //\n// src/route/index.js","import Vue from 'vue'\nimport Vuex from 'vuex'\nimport { fetchItem } from '../api'\n\nVue.use(Vuex)\n\nexport function createStore() {\n  return new Vuex.Store({\n    state: {\n      items: {},\n      user: ''\n    },\n\n    actions: {\n      fetchItem({ commit }, id) {\n        return fetchItem(id).then(item => {\n          commit('setItem', { id, item })\n        })\n      },\n\n      fetchUser({ commit }, id) {\n        return new Promise((res, rej) => {\n          setTimeout(() => {\n            commit('setUser', 'jmingzi')\n            res()\n          }, 2000)\n        })\n      }\n    },\n\n    mutations: {\n      setUser(state, name) {\n        state.user = name\n      },\n\n      setItem(state, { id, item }) {\n        Vue.set(\n          state.items,\n          id,\n          item.status === 200\n            ? item.data.data || item.data.message\n            : item.data\n        )\n      }\n    }\n  })\n}\n\n\n// WEBPACK FOOTER //\n// src/store/index.js","import axios from 'axios'\n\nconst weatherApi = 'https://www.sojson.com/open/api/weather/json.shtml?city='\nexport function fetchItem(city = '杭州') {\n  console.log('fetchItem')\n  return axios.get(weatherApi + encodeURIComponent(city))\n}\n\n\n// WEBPACK FOOTER //\n// src/api/index.js"],"mappings":";;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACnCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;AACA;AAYA;AACA;;;;;;;;;AC9BA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC/BA;AAAA;AAAA;;;;;;;;ACAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC1BA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAFA;AAHA;AASA;;;;;;;;AChBA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAdA;AACA;AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AAOA;AAbA;AAvBA;AAuCA;;;;;;;AC9CA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;A","sourceRoot":""}